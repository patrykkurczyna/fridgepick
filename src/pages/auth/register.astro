---
import AuthLayout from "../../layouts/AuthLayout.astro";
import { RegisterForm } from "../../components/auth/RegisterForm";

const title = "Rejestracja";

// Check if user is already logged in (but allow demo users to register)
if (Astro.locals.session) {
  const isDemo = Astro.locals.session.user?.user_metadata?.is_demo === true;

  // Only redirect non-demo users who are already authenticated
  if (!isDemo) {
    return Astro.redirect("/fridge");
  }
}
---

<AuthLayout title={title}>
  <RegisterForm client:load />

  <div slot="footer">
    <p class="text-gray-500">
      Wróć do{" "}
      <a href="/" class="text-emerald-600 hover:text-emerald-500 transition-colors font-medium cursor-pointer">
        strony głównej
      </a>
    </p>
  </div>
</AuthLayout>
